.cpu mm-3

.input 0x100
.output 0x101

.code
00 0103 0000 0101 ; 0 move 1 R
00 0100 0000 0102 ; 1 move N M
85 0102 0103 0006 ; 2 M ⩽ 1 -> halt
03 0101 0102 0101 ; 3 smul R M =: R
02 0102 0103 0102 ; 4 sub M 1 =: M
80 0000 0000 0002 ; 5 -> ⩽
99 0000 0000 0000 ; 6 halt

.code 0x100
00000000000000    ; 0 N
00000000000000    ; 1 R
00000000000000    ; 2 M
00000000000001    ; 3 1

.enter 6
